##  ìŠ¤í”„ë§ CRUD ê²Œì‹œíŒ ìŠ¤í„°ë”” ë³´ê³ ì„œ (2025-12-11)

###  í˜„ì¬ í”„ë¡œì íŠ¸ ìƒíƒœ

* Repository URL: https://github.com/BAEKYUJEONG/BoardAPI/tree/develop

---

###  ì˜¤ëŠ˜ ì™„ë£Œí•œ ì‘ì—…

#### 1. Entity ì‚¬ì´ì˜ ì—°ê´€ê´€ê³„ ì£¼ì…

* User, Board, Post, Comment ì‚¬ì˜ N:1 ì—°ê´€ê´€ê³„ ì£¼ì…
* @OneToMany í˜¹ì€ @ManyToOne ìœ¼ë¡œ ê´€ê³„ ì„¤ì •

#### 2. UserService ì‘ì—…

* íšŒì›ê°€ì…ê³¼ ì¡°íšŒ, ì—…ë°ì´íŠ¸, ì‚­ì œì— ê´€í•œ ì½”ë“œ ì¶”ê°€
* `createUser`
* `getUser`
* `getAllUsers`
* `updateUser`
* `deleteUser`

#### 3. UserController ì‘ì—…

* ê° Serviceì— ë§ëŠ” API ì½”ë“œ ì¶”ê°€

---

### ì½”ë“œ í”¼ë“œë°± ë° ë…¼ì˜ ì‚¬í•­

#### 1. Gradle, Spring Boot, Hibernate ë²„ì „ ë° ì„¤ì • ì´ìŠˆ

ë²„ì „ë³„ ì§€ì› í˜„í™©:
| ì„¤ì •                                                | Hibernate ë²„ì „ í˜¸í™˜ | ì˜ë¯¸                   | í˜„ì¬(Spring Boot 3.x) ê¶Œì¥ ì—¬ë¶€ |
| ------------------------------------------------- | --------------- | -------------------- | ------------------------- |
| `hibernate.dialect=MySQL8Dialect`                 | 5.x             | MySQL 8 ìµœì í™” Dialect  | ë¹„ê¶Œì¥(Deprecated)           |
| `hibernate.dialect=MySQLDialect`                  | 6.x             | MySQL Dialect ìë™ ìµœì í™” | ê¶Œì¥                        |
| `hibernate.temp.use_jdbc_metadata_defaults=false` | 5.x             | JDBC ë©”íƒ€ë°ì´í„° ë¹„í™œì„±í™”      | ì‚¬ìš© ê¸ˆì§€                     |
| `hibernate.boot.allow_jdbc_metadata_access=true`  | 6.x             | JDBC ë©”íƒ€ë°ì´í„° ì ‘ê·¼ í—ˆìš©     | ê¶Œì¥(ê¸°ë³¸ê°’)                   |
| `hibernate.boot.allow_jdbc_metadata_access=false` | 6.x             | ë©”íƒ€ë°ì´í„° ì ‘ê·¼ ë¹„í™œì„±í™”        | íŠ¹ì • ìƒí™©ì—ë§Œ ì‚¬ìš©                |

```
use_jdbc_metadata_defaults
MySQL8Dialect

âœ… ì§€ì›í•˜ëŠ” ë²„ì „
- **Hibernate 5.0+**
- **Spring Boot 2.0 ~ 2.7.x**

âŒ ë¬¸ì œê°€ ë˜ëŠ” ë²„ì „
- **Hibernate 6.0+**
- **Spring Boot 3.x** (Hibernate 6.x)
```

#### [í•´ê²°ì±…]

Spring Boot 3.xë¥¼ ì‚¬ìš© ì¤‘ì´ë¼ë©´ í•´ë‹¹ ì„¤ì •ì„ ì œê±°í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì„¤ì •ìœ¼ë¡œ êµì²´! ğŸ¯
Spring Boot 3.x / Hibernate 6.x
```
spring:
  jpa:
    hibernate:
      ddl-auto: update
    # use_jdbc_metadata_defaults ì„¤ì • ì œê±°
    properties:
      hibernate:
        # ì´ ì„¤ì • ëŒ€ì‹  ë‹¤ë¥¸ ë°©ì‹ ì‚¬ìš©
        boot:
          allow_jdbc_metadata_access: false  # ìƒˆë¡œìš´ ì„¤ì •
```

ë˜ëŠ” ì™„ì „íˆ ì œê±°
```
spring:
  jpa:
    hibernate:
      ddl-auto: update
    # properties ì„¹ì…˜ì—ì„œ í•´ë‹¹ ì„¤ì •ë§Œ ì‚­ì œ
```

í˜„ì¬ ë²„ì „ í™•ì¸ë²•:
```
./gradlew dependencies | grep hibernate
```

---

### í•™ìŠµ ì •ë¦¬
##### notion : [MySQLDialect vs MySQL8Dialect](https://www.notion.so/MySQLDialect-vs-MySQL8Dialect-2c6304a558a880188fa2f8b581463c49)
##### notion : [use_jdbc_metadata_defaults vs allow_jdbc_metadata_access](https://www.notion.so/use_jdbc_metadata_defaults-vs-allow_jdbc_metadata_access-2c6304a558a880f084c6d6ce439b3984)
##### notion : [Dialectë€? / allow_jdbc_metadata_accessë€?](https://www.notion.so/Dialect-allow_jdbc_metadata_access-2c6304a558a88077a5c5f9b3cdc346a8)

---

### ìœ ì˜í•  ì 

**Spring Boot 3.x vs Spring Boot 4.x ì°¨ì´**

#### 1) JPA
- Dialect ë° naming ì „ëµ ë³€í™”
- Hibernate ì„¤ì • ë³€ê²½ ë˜ëŠ” ì‚­ì œ í•„ìš”
- ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„± ê²°ê³¼ê°€ ë°”ë€” ìˆ˜ ìˆìŒ

#### 2) Security
- HttpSecurity DSL ë³€ê²½
- ì¸ì¦/ì¸ê°€ ì„¤ì • ì¬ì‘ì„± í•„ìš” ê°€ëŠ¥ì„±

#### 3) Validation
- @Email, @NotNull ë“±ì˜ ë™ì‘ ë°©ì‹ ë³€ê²½ ì²´í¬

#### 4) Jackson / ë°ì´í„° ë°”ì¸ë”©
- ì§ë ¬í™”/ì—­ì§ë ¬í™” ì •ì±… ì˜í–¥ í™•ì¸

#### 5) Deprecated API ì‚­ì œ
- Gradle build ì‹œ ì»´íŒŒì¼ ì˜¤ë¥˜ ëŒ€ëŸ‰ ë°œìƒ ì˜ˆìƒ
- RestTemplate, ì¼ë¶€ ìœ í‹¸ API ì œê±°

#### 6) ë²„ì „ í˜¸í™˜ì„±
- Java 21 í•„ìˆ˜
- ë¼ì´ë¸ŒëŸ¬ë¦¬ ëŒ€ë¶€ë¶„ ì—…ê·¸ë ˆì´ë“œ í•„ìš”

---

###  ë‹¤ìŒì— í•  ì¼

* ERD ì‘ì„±
  * ê°€ì‹œì ì¸ ERD ê·¸ë¦¼ ê·¸ë¦¬ê¸°
* íšŒì›ê°€ì… ì‹œì— email ë“±ì˜ íƒ€ì… unique ì„¤ì •, email ì •ê·œì‹ íŒ¨í„´ ê²€ì¦ (ex) @ .com) validation ìœ íš¨ì„± ê²€ì‚¬ í•„ìš”
* User ì™¸ì— Board, Post, Comment ì™€ ê´€ë ¨í•œ Service, Controller ì½”ë“œ ì‘ì„±
* ì—”í‹°í‹° ê°„ì˜ ì—°ê´€ê´€ê³„ ì£¼ì… í›„ lombok ë¹Œë” íŒ¨í„´ ê²½ê³  ë¬¸ì œ í•´ê²°
  * Lombokì˜ @Builderê°€ í•„ë“œ ì´ˆê¸°ê°’ì„ ë¬´ì‹œí•˜ëŠ” ë¬¸ì œ í•´ê²°í•˜ê¸°
